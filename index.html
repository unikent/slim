<!DOCTYPE html>
<html>
	<head>
		<title>slim editor</title>
		<link href="bower_components/sir-trevor-js/sir-trevor.css" media="screen" rel="stylesheet" type="text/css" />
		<link href="bower_components/sir-trevor-js/sir-trevor-icons.css" media="screen" rel="stylesheet" type="text/css" />

		<link href="bower_components/bootstrap/dist/css/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css" />
	</head>

	<body class="container">
		<header class="page-header">
			<h1>Shiny Little Internet Maker</h1>
		</header>

		<br />

		<form id="editor" action="POST">
			<fieldset class="colset row">
				<input type="hidden" name="colset[0][type]" value="2c:8-4:v0.1" />

				<div class="col col-md-8">
			 		<textarea name="colset[0][col][0]"></textarea>
			 	</div>

			 	<div class="col col-md-4">
					<textarea name="colset[0][col][1]"></textarea>
				</div>
			</fieldset>
		</form>

		<button class="add-colset btn btn-primary">Add Colset</button>

		<script type="text/javascript" src="bower_components/underscore/underscore-min.js"></script>
		<script type="text/javascript" src="bower_components/jquery/jquery.min.js"></script>
		<script type="text/javascript" src="bower_components/jquery/jquery-migrate.min.js"></script>
		<script type="text/javascript" src="bower_components/Eventable/eventable.js"></script>
		<script type="text/javascript" src="bower_components/sir-trevor-js/sir-trevor.min.js"></script>

		<script>
			$('#editor textarea').each(function(){
				new SirTrevor.Editor({ el: $(this) });
			})

			$('.add-colset').click(function(){
				var form = $('form');
				var colset = form.find('.colset')
				var counter = colset.length;

				colset = colset.first().clone();
				colset.find('input, textarea').each(function(){
					$(this).attr('name', $(this).attr('name').replace('colset[0]', 'colset['+ counter + ']'))
				});

				form.append(colset);
			});
		</script>

		<style type="text/css">
			.col {
				min-height: 20em; 
				border: 2px dashed #c4c4c4; 
			}

			.colset + .colset { 
				margin-top: 1em;
				border-top: none; 
			}

			.col + .col { border-left: none; }

			.add-colset { margin-top: 2em; }
		</style>
	</body>
</html>